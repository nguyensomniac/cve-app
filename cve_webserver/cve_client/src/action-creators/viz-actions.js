import fetch from 'isomorphic-fetch';

export const REQUEST_ARTICLES = 'REQUEST_ARTICLES';
const requestArticles = () => {
  return {
    type: REQUEST_ARTICLES
  }
}

export const RECEIVE_ARTICLES = 'RECEIVE_ARTICLES';
const receiveArticles = (articles) => {
  return {
     type: RECEIVE_ARTICLES,
     articles
  }
}

export const fetchArticles = () => {
  return (dispatch) => {
    fetch('/api/articles')
      .then((response) => {
        if (response.status == 200) {
          return response.json();
        } else {
          return Promise.reject();
        }
      })
      .then((articles) => {
        dispatch(receiveArticles(articles));
      })
  }
}

export const REQUEST_REGIONS = 'REQUEST_REGIONS';
const requestRegions = () => {
  return {
    type: REQUEST_REGIONS
  }
}

export const RECEIVE_REGIONS = 'RECEIVE_REGIONS';
const receiveRegions = (regions) => {
  return {
    type: RECEIVE_REGIONS,
    regions
  }
}

export const fetchRegions = () => {
  return (dispatch) => {
    fetch('/api/census_data')
      .then((response) => {
        if (response.status == 200) {
          return response.json();
        } else {
          return Promise.reject();
        }
      })
      .then((regions) => {
        console.log(regions);
        dispatch(receiveRegions(regions));
      })
  }
}

// Controls active item on map.
export const SET_ACTIVE_ITEM = 'SET_ACTIVE_ITEM';
export const setActiveItem = (item) => {
  return {
    type: SET_ACTIVE_ITEM,
    item
  }
}

export const CLEAR_ACTIVE_ITEM = 'CLEAR_ACTIVE_ITEM';
export const clearActiveItem = () => {
  return {
    type: CLEAR_ACTIVE_ITEM
  }
}
