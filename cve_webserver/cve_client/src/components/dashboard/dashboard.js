import React, { Component } from 'react';
// import PropTypes from 'prop-types';
import styles from './dashboard.css';
import data from './goals.json';
import Modal from 'react-modal';

// npm install --save react-modal
// https://github.com/reactjs/react-modal

class DashBoard extends Component {
 
	constructor() {

	    super();

	    this.state = {
	      modalIsOpen: false
	    };

		this.openModal = this.openModal.bind(this);
		this.afterOpenModal = this.afterOpenModal.bind(this);
		this.closeModal = this.closeModal.bind(this);
	}

	openModal() {
		this.setState({modalIsOpen: true});
	}	

	afterOpenModal() {
		// references are now sync'd and can be accessed.
		this.subtitle.style.color = '#f00';
	}

	closeModal() {
		this.setState({modalIsOpen: false});
	}


	render() {
    	function make_new(e) {
    		e.preventDefault();
    		alert("Let's make a new watch tile:");
    	}

        var tiles = data.map(function(goal) {
            return (
            	<div className={styles.tile}> 
					<div className={styles.title}> your goal: {goal["title"]}</div>
					<div className={styles.metric}> based on: {goal["metric"]}</div>
					<div className={styles.indicator}> is doing {goal["indicator"]}</div>
				</div>
			);
        });

    	return (
			<div className={styles.container}> 
				 {tiles}
				 <div className={styles.tile}>
				 	<div className={styles.make_new} onClick={this.openModal}>
				 		+ Make a New Watch Tile

				 	</div>
				 </div>
				 <Modal
			          isOpen={this.state.modalIsOpen}
			          onAfterOpen={this.afterOpenModal}
			          onRequestClose={this.closeModal}
			          contentLabel="new_tile"
			        >

			          <h2 ref={subtitle => this.subtitle = subtitle}>Make a new watch tile</h2>
			          <button onClick={this.closeModal}>close</button>
			          <form>

			          	<div>What community would you like to watch? </div>
							<select>
							  <option value="north">North Berkeley</option>
							  <option value="south">South Berkeley</option>
							  <option value="downtown">Downtown Berkeley</option>
							  <option value="east">East Berkeley</option>
							</select>
			          	<div> Would you like to set a benchmark? </div>
				         	 <input type="radio" name="benchmark" value="percent" /> Percent of Articles <br/>
							 <input type="radio" name="benchmark" value="quantity" /> Number of Articles <br/>
							 <input type="radio" name="benchmark" value="none" /> None <br/>
							 <input type="text" name="amount" /> Amount <br />

							 <button>Submit</button>
			          </form>
			       </Modal>
			</div>
		)
	}
}

export default DashBoard;
