import React, { Component } from 'react';
import PropTypes from 'prop-types';
import { connect } from 'react-redux';

import styles from './dash-viz.css';

import DashMap from '../../components/dash-map/dash-map';
import SupportCharts from '../../components/support-charts/support-charts';

import { setActiveItem } from '../../action-creators/viz-actions';

class DashViz extends Component {
  static propTypes = {
    articles: PropTypes.array,
    activeItem: PropTypes.object,
    onClickMarker: PropTypes.func
  }
  render() {
    return (
      <div className={styles.container}>
        <div className={styles.mapContainer}>
          <DashMap className={styles.mapContainer} lon={-122.275} lat={37.861} zoom={11.6} articles={this.props.articles} onClickMarker={this.props.onClickMarker} />
        </div>
        <div className={styles.chartContainer}>
          <SupportCharts className={styles.chartContainer} articles={this.props.articles} activeItem={this.props.activeItem} />
        </div>
      </div>
    )
  }
}

const mapStateToProps = (state) => {
  return {
    articles: state.articleData,
    activeItem: state.activeItem
  }
}

const mapDispatchToProps = (dispatch) => {
  return { onClickMarker: (item) => dispatch(setActiveItem(item)) }
}

export default connect(mapStateToProps, mapDispatchToProps)(DashViz);
